
namespace Reddit_app
{
    internal class View
    {
        protected ViewManager vm;
        protected string content;
        protected List<Option> menu;
        protected View(ViewManager vm)
        {
            this.vm = vm;
        }
        public virtual void Initialize() { }
        protected void Draw()
        {
            Console.Clear();
            Initialize();
            Console.WriteLine(content);
            
            foreach (var option in menu)
            {
                Console.WriteLine($"{option.optionId}. {option.optionText}");
            }
        }
        public void Run() {
            while (true)
            {
                Draw();
               
                Console.Write("Select an option: ");
                var input = Console.ReadLine();

                if (int.TryParse(input, out int selectedId))
                {
                    var selectedOption = menu.FirstOrDefault(opt => opt.optionId == selectedId);
                    if (selectedOption != null)
                    {
                        selectedOption.optionAction?.Invoke();
                        
                        if (selectedOption.optionText == "Exit")
                        {
                            break;
                        }
                    }
                    else
                    {
                        Console.WriteLine("Invalid option. Please try again.");
                    }
                }
                else
                {
                    Console.WriteLine("Please enter a valid number.");
                }
            }


        }
    }
}
